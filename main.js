var queue = [733419,733420,733421,733422,733423,733424,733425,733426,733427,733428,733429,733430,733431,733432,733433,733434,733435,733436,733437,733438,733439,733440,733441,733442,733443,733444,733445,733446,733447,733448,733449,733450,733451,733452,733453,733454,733455,733456,733457,733458,733459,733460,733461,733462,733463,733464,733465,733466,733527,733528,733529,733531,733532,733533,733535,734140,734141,734163,734173,734174,734175,734176,734177,734178,734179,734180,734181,734182,734183,734184,734185,734186,734187,734188,734189,734190,734191,734192,734193,734194,734195,734196,734197,734198,734199,734200,734201,734202,734203,734206,734207,734208,734209,734210,734211,734212,734213,734214,734215,734217,734218,734219,734220,734221,734222,734223,734227,734228,734229,734230,734232,734233,734234,734235,734236,734237,734238,744767,744768,744769,758066,758067,758068,758069,758475,758476]
var __token ='898f99a7-8784-13db-83ff-16bd497e8754'
var views = "3.138.248"
var cokie_1 = ".ASPXAUTH=1915095233682992DA5B2621706CFFD11E3F129BAF9927866BC3294D6615E25C9BC5F604EB7695044505D7CF9079E846D341C863181846DABF47701E50C36A85C974F46FE50D9A1E6EA6C5459666807563A350035AB3E4FAD4DDAFE5C2DBB99699AC3122368FC02C32FD50ACD7D32B8440668A9E3CE41EF2E0989E23C659ECF035178DE50DF862A9D39B16B74BACE727C579138739C2AED5EB0BE26EBBD353DE43DAD0DA74226F49F03DC2B72C2CC93946213287188708E43D12E573E5C7E3465CE898FC5EE3EEFFD00543067B1E53993C24EC4F; comicvisitor=439d8eb5-9011-46a1-8daa-b66678dbdbe7; comicread=439d8eb5-9011-46a1-8daa-b66678dbdbe7; _gid=GA1.2.1684904385.1688907839; ASP.NET_SessionId=omxycheqrpip41hmi2ri2wjp; ASP.NET_SessionId=zihgorpy3aasuyf253voaswt; www.nettruyenmax.comportalroles=BBB038190843872B893F68B51B9B511A76C99BC36582854E45981844BF4C3C265F7BF95E1894A279882B88D682D079C5616B811299F1C6EA0B65C46E9840E06295402AE7CC75B9E052FC993301576BD0822245FF967435018F236361EABA9D169FE8F0CC44562E1D9586FB26DDBC633E4CC867E22CAAC6F8618966B1BC92AE28F7541020C8E73B5ED093840AF2AF5E7EAA39AB458C40F3F4869A6268D299CDD4ACD518CF7A5037375A2784F5832EF3903EABEDBD; f.nettruyenmax.comportalroles=4F638F9A27F8765249491D8ACE0D05F41770AED671CA0B71064125294AF6F76AC715ED2B459AC630EB42458D9DC9A23734848D85DA4A9FBA3D0A6BB6DAB3C69C5E01AACC0E4EA529D197F3B6C24327F0AC336E7A712BEDADFF28FAB349693D49B040B3CC191F9EFABC7B05A86A87AB19A315C748D5F520C247DC57235435678AA59B0C6171F04EB5D0A1C86DC2EA6644DB17939D2EE801D72B79F10108A2B72A03AE287C868E680DF1BF7D566569C6AC84B35772; _gat_gtag_UA_57670566_10=1; _ga_4X7L3HYB4K=GS1.1.1690687700.249.1.1690687706.0.0.0; _ga=GA1.1.313180360.1687224376"
var cokie_2 = "comment_name=CHiáº¿n Tháº§n; _gid=GA1.2.27935727.1690620689; _gat_gtag_UA_57670566_10=1; ASP.NET_SessionId=zbcbsbx3odbtvnoh34xya5fh; ASP.NET_SessionId=u1wfe5xacs215nxi2pkr5biv; returnurl1=/; .ASPXAUTH=1306FA68583B836FA8329A88996472FEB9AA5088013EE83B23E35668BFA121DAD77806BC4A9C5363A97BACD162229DA614042D0AF5F8154F2358B11EC1919012A9C46EBEF62C8029293064E355EE77AA23B74590B55990A16BD1593DEDCF354C259367E9D59494E38BEA1F48CB41B73A98EA331DADFA1AA9448C93985563FAD4FF602EA55F7F856C9449142ABA5501A190DD01D5190662E828DCD277165C8E4F6279C516489AC3AEFEA62865496C3EF9BDEC50FD05764E620C873B51B54A120378FDA5F9; www.nettruyenmax.comportalroles=620791A9BB3FF774A39A83EB2C3D5F7CFCEA820F1B6CE00F62276AD4751EF7C530BB312301F744A60E5FBD5823331F0E399F6B1248E0665C3645BDED2BAFE58AF22CAC0F6373E25D04C5C5B76654995D67D4A5DECE3D182D6C3B90E470767F1EE71A7E663FAF20BF0B2A54C573DD89AE2067F6A2662C903BA59E697CB4D0A007CFC6B456E02CB13993E1FB9C949DE47F247662B6F9D95F4D3375996D97789046D15C2799; comicvisitor=43fd3bc5-373e-4d29-b3d3-78fa6bdfe0ca; comicread=43fd3bc5-373e-4d29-b3d3-78fa6bdfe0ca; _ga_4X7L3HYB4K=GS1.1.1690687208.29.1.1690687745.0.0.0; _ga=GA1.2.780534756.1687262041"
var cokie_3 = "comment_name=huhu; _gid=GA1.2.27935727.1690620689; ASP.NET_SessionId=zbcbsbx3odbtvnoh34xya5fh; ASP.NET_SessionId=u1wfe5xacs215nxi2pkr5biv; returnurl1=/; .ASPXAUTH=D14321ABF2F74BECEE5375DCB2450245A0787CEA5B9A037529836A6BAC220A789715CE04464C99C6D7F7F2CD074CCB9C6CFC8392BEBEF3AC9B8F03760643CD95F123BA045F14BF7D06DD7FBB6B96B02E37BD3DE06A1C332FADE7B3869BD6A94EA07680CE5BF8E67B77ED299BB409B0DAD8C00B049332C17C754E580B98A0BB3A5409AC175FE9A2342E7E3C10CE7196BAF64329F9651663864E9AD1F6B1CFA16108F980EBB38503FEB9F2FE47F589DE73FE093B948B5F804937BE5210F05EFC9637F66E59C8F1F4941B4E59D639A583F9FB83286A; www.nettruyenmax.comportalroles=D461DAB332C1AF4F213AC372DF234E671C5B51BE5CC295B9AA7E1C140FAE7E19021DEACE64DA6E273836C3EB4C78029C40D656CFC5A4602F6490080FA2352F0E1F2FF238FE70B5AFA5841B533F16C0E9FCA601E8F041BB041713FD19B84164B172F3840B83AD8FEF8D4009367B232EAC648C001BC1375E9415EF166E09CF1366711ECCEA934A83633D563E437B32585D8176A909C64D10057FCAD394CAD7CA6A12E14D66FE436635657BADBA16F6AF6A72D8DA2F; comicvisitor=ef4f2c95-d6d7-48c0-80fa-0f5516be1650; comicread=ef4f2c95-d6d7-48c0-80fa-0f5516be1650; _ga_4X7L3HYB4K=GS1.1.1690687208.29.1.1690687796.0.0.0; _ga=GA1.1.780534756.1687262041"
var cokie_4 = ""




var __count =0
async function readchap(num,ctoken,cokie,numcokie){
    await new Promise((resolve) => {
        let data = {
            chapterId: queue[num],
            comicToken: ctoken,
            userToken: ''
        }
        
        fetch('https://f.nettruyenmax.com/Comic/Services/ComicService.asmx/ChapterLoaded',{
            method: "POST",
            headers: {
                'Content-Type': "application/json",
                'Cookie': cokie,
            },
            body:JSON.stringify(data),
        })
            .then((response) => response.text())
            .then((body) => {
                var er = body
                let succ = er.match(/"success":(.*?),/)[1]
                if(succ=="true"){
                    let token = er.match(/"token":"(.*?)"/)[1]
                    let dataread ={
                        chapterId: data.chapterId,
                        token: token
                    }
        
                    fetch('https://f.nettruyenmax.com/Comic/Services/ComicService.asmx/Read',{
                        method: "POST",
                        headers: {
                            'Content-Type': "application/json",
                            'Cookie':cokie,
                        },
                        body:JSON.stringify(dataread),
                    })
                        .then((response) => response.text())
                        .then((body) => {
                            let succ2 = (body.match(/"success":(.*?),/)||[])[1]
                            console.log(body,__count)
                            if(succ2=='true'){
                                __count++
                                setTimeout(resolve,2151)
                            }else{
                                resolve()
                            }
                        }); 
                }
            }); 
    })
}


async function main(){
    for(i=0;i<queue.length;i++){
        await readchap(i,__token,cokie_1,'c1')
        await readchap(i,__token,cokie_2,'c2')
        await readchap(i,__token,cokie_3,'c3')
        await readchap(i,__token,cokie_4,'c4')
    }
    main()
}

main()